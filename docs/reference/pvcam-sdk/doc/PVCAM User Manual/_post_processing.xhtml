<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PVCAM: Post-Processing</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="PM_logo_html.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PVCAM
   &#160;<span id="projectnumber">3.10.x</span>
   </div>
   <div id="projectbrief">Programmable Virtual Camera Access Method library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_post_processing.xhtml','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Post-Processing </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Most PVCAM-compatible cameras offer on-board post-processing (PP) capabilities. PVCAM provides a mechanism for discovering the available post-processing features and their parameters.</p>
<h1><a class="anchor" id="secPpParams"></a>
Available Parameters</h1>
<p>All the post-processing features and parameters are controlled via a set of PVCAM parameters (see <a class="el" href="_api_parameters.xhtml">Parameter Access Functions</a> chapter for details) which can be viewed as a tree where each PP feature has a different number of PP parameters. Typically, PP features and their parameters are discovered in the following order:</p><ul>
<li><a class="el" href="group__grp__pm__parameters.xhtml#gae1127ec5c81c0bb775be2b2e406e5b1d" title="This selects the current post-processing feature from a table of available choices. ">PARAM_PP_INDEX</a> - the index corresponding to the post-processing feature. This parameter should be used for discovering any available PP features and for switching between them.</li>
<li><a class="el" href="group__grp__pm__parameters.xhtml#ga939def6cf993a0a272176dbf2c646e94" title="This returns the ID of the currently-selected post-processing feature. ">PARAM_PP_FEAT_ID</a> - a unique identifier for the currently selected PP feature. Even though the same features may not appear at the same index across various camera models, this ID will always identify a particular post-processing feature.</li>
<li><a class="el" href="group__grp__pm__parameters.xhtml#ga00b76a0915b0f23a522ebf6f4cf4d2e9" title="This returns the name of the currently selected post-processing feature. ">PARAM_PP_FEAT_NAME</a> - the name of the currently selected PP feature.</li>
<li><a class="el" href="group__grp__pm__parameters.xhtml#gadefc71129faca3766fa39b0e68bcf7c8" title="This selects the current post-processing parameter from a table of available choices. ">PARAM_PP_PARAM_INDEX</a> - the index corresponding to post-processing parameter under the currently selected PP feature. It is also used for switching between all the feature parameters.</li>
<li><a class="el" href="group__grp__pm__parameters.xhtml#gaa550f7102be94c6d56f97d41fd5651db" title="This returns the ID of the currently selected post-processing parameter. ">PARAM_PP_PARAM_ID</a> - a unique identifier for the currently selected PP parameter. Even though parameters may not appear at the same index due to differences in features and parameters supported by a particular camera, this ID will always identify a particular post-processing parameter.</li>
<li><a class="el" href="group__grp__pm__parameters.xhtml#ga1d8ce20383c2fd9b869ada8b70312564" title="Gets the name of the currently selected post-processing parameter for the currently selected post-pro...">PARAM_PP_PARAM_NAME</a> - the name of the currently selected PP parameter for the currently selected PP feature.</li>
<li><a class="el" href="group__grp__pm__parameters.xhtml#gaf9380c3481ef2fb3e3f4c8a31eba5a24" title="This gets or sets the post-processing parameter for the currently selected post-processing parameter ...">PARAM_PP_PARAM</a> - the value of the currently selected PP parameter for the currently selected PP feature.</li>
</ul>
<p>PVCAM API contains a single post-processing control function:</p><ul>
<li><a class="el" href="group__grp__pm__functions.xhtml#ga424b470985bb7821ba817fb9bd98af86" title="This function will reset all post-processing modules to their default values. ">pl_pp_reset</a> - resets all the PP parameters of all the PP features to their factory defaults, i.e. the camera power-up state.</li>
</ul>
<h1><a class="anchor" id="secPpFeatures"></a>
Available Post-Processing Features</h1>
<p>All the existing post-processing features are listed in <a class="el" href="pvcam_8h.xhtml#a912c2ec121cdac4c25416588b5386d9d">PP_FEATURE_IDS</a> enum in <a class="el" href="pvcam_8h.xhtml">pvcam.h</a> header file.</p>
<p>Please note that the feature names in this list and actual advertised names may differ. For example, the feature advertised as PrimeEnhance is named Denoising (<a class="el" href="pvcam_8h.xhtml#a07f31baab6b320af2d77802708429e31a85252a72549a41aab89ebb5a4c7a1c3f">PP_FEATURE_DENOISING</a>) in the PVCAM SDK.<br />
Refer to your camera documentation for more details.</p>
<p>Most cameras only support a subset of the exisiting post-processing features, thus dynamic feature discovery is always required.</p>
<h1><a class="anchor" id="secPpDiscovery"></a>
Initial Discovery</h1>
<p>To identify and cache available post-processing features and parameters, the application code should traverse the post-processing tree:</p><ul>
<li>Get number of PP features by calling <a class="el" href="group__grp__pm__functions.xhtml#gabae50780da6c680d41331980f3135e55" title="Returns the requested attribute for a PVCAM parameter. ">pl_get_param</a> with <a class="el" href="group__grp__pm__parameters.xhtml#gae1127ec5c81c0bb775be2b2e406e5b1d" title="This selects the current post-processing feature from a table of available choices. ">PARAM_PP_INDEX</a> and <a class="el" href="pvcam_8h.xhtml#a4964cf649379135a35524118cdd576e9a37de267bbf20d131c834f88cb91bba38">ATTR_COUNT</a>.</li>
<li>For each feature index in the range from 0 to <code>ppFeatCount-1</code>:<ul>
<li>Switch to the feature by calling <a class="el" href="group__grp__pm__functions.xhtml#gaa69957bd29e392a02e864239d956057a" title="Sets the current value for a PVCAM parameter. ">pl_set_param</a> with <a class="el" href="group__grp__pm__parameters.xhtml#gae1127ec5c81c0bb775be2b2e406e5b1d" title="This selects the current post-processing feature from a table of available choices. ">PARAM_PP_INDEX</a> and feature index.</li>
<li>Get the feature ID and name by reading the current value of <a class="el" href="group__grp__pm__parameters.xhtml#ga939def6cf993a0a272176dbf2c646e94" title="This returns the ID of the currently-selected post-processing feature. ">PARAM_PP_FEAT_ID</a> and <a class="el" href="group__grp__pm__parameters.xhtml#ga00b76a0915b0f23a522ebf6f4cf4d2e9" title="This returns the name of the currently selected post-processing feature. ">PARAM_PP_FEAT_NAME</a> parameters.</li>
<li>Get the number of PP parameters of the selected feature by calling <a class="el" href="group__grp__pm__functions.xhtml#gabae50780da6c680d41331980f3135e55" title="Returns the requested attribute for a PVCAM parameter. ">pl_get_param</a> with <a class="el" href="group__grp__pm__parameters.xhtml#gadefc71129faca3766fa39b0e68bcf7c8" title="This selects the current post-processing parameter from a table of available choices. ">PARAM_PP_PARAM_INDEX</a> and <a class="el" href="pvcam_8h.xhtml#a4964cf649379135a35524118cdd576e9a37de267bbf20d131c834f88cb91bba38">ATTR_COUNT</a>.<ul>
<li>For each feature parameter index in range from 0 to <code>ppParamCount-1</code>:<ul>
<li>Switch to the parameter by calling <a class="el" href="group__grp__pm__functions.xhtml#gaa69957bd29e392a02e864239d956057a" title="Sets the current value for a PVCAM parameter. ">pl_set_param</a> with <a class="el" href="group__grp__pm__parameters.xhtml#gadefc71129faca3766fa39b0e68bcf7c8" title="This selects the current post-processing parameter from a table of available choices. ">PARAM_PP_PARAM_INDEX</a> and parameter index.</li>
<li>Get the parameter ID and name by reading the current value of <a class="el" href="group__grp__pm__parameters.xhtml#gaa550f7102be94c6d56f97d41fd5651db" title="This returns the ID of the currently selected post-processing parameter. ">PARAM_PP_PARAM_ID</a> and <a class="el" href="group__grp__pm__parameters.xhtml#ga1d8ce20383c2fd9b869ada8b70312564" title="Gets the name of the currently selected post-processing parameter for the currently selected post-pro...">PARAM_PP_PARAM_NAME</a> parameters.</li>
<li>Set new value or read any attribute of <a class="el" href="group__grp__pm__parameters.xhtml#gaf9380c3481ef2fb3e3f4c8a31eba5a24" title="This gets or sets the post-processing parameter for the currently selected post-processing parameter ...">PARAM_PP_PARAM</a> parameter.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="secPpDirectAccess"></a>
Using Unique IDs</h1>
<p>Traversing the tree of all PP features and parameters whenever a value has to be changed (e.g. to enable or disable Denoising feature) is not required. After caching all indexes and IDs during the initial discovery, any value can be changed following the steps in the example pseudo-code below:</p>
<div class="fragment"><div class="line"><span class="comment">// TODO: Handle errors</span></div><div class="line"></div><div class="line"><span class="comment">// Switch to the Denoising feature</span></div><div class="line"><a class="code" href="master_8h.xhtml#a4355d16fcf9f644c9ac84293f0b1801f">int16</a> featIdx = GetPpFeatureIndexForId(hcam, <a class="code" href="pvcam_8h.xhtml#a07f31baab6b320af2d77802708429e31a85252a72549a41aab89ebb5a4c7a1c3f">PP_FEATURE_DENOISING</a>);</div><div class="line"><a class="code" href="group__grp__pm__functions.xhtml#gaa69957bd29e392a02e864239d956057a">pl_set_param</a>(hcam, <a class="code" href="group__grp__pm__parameters.xhtml#gae1127ec5c81c0bb775be2b2e406e5b1d">PARAM_PP_INDEX</a>, &amp;featIdx);</div><div class="line"></div><div class="line"><span class="comment">// Switch to the enabled parameter</span></div><div class="line"><a class="code" href="master_8h.xhtml#a4355d16fcf9f644c9ac84293f0b1801f">int16</a> paramIdx = GetPpParameterIndexForId(hcam, <a class="code" href="pvcam_8h.xhtml#a0cb55bef3c52863a9fd3531226059d4fa925378dfe482992ba02725c74b7625af">PP_FEATURE_DENOISING_ENABLED</a>);</div><div class="line"><a class="code" href="group__grp__pm__functions.xhtml#gaa69957bd29e392a02e864239d956057a">pl_set_param</a>(hcam, <a class="code" href="group__grp__pm__parameters.xhtml#gadefc71129faca3766fa39b0e68bcf7c8">PARAM_PP_PARAM_INDEX</a>, &amp;paramIdx);</div><div class="line"></div><div class="line"><span class="comment">// Set new value</span></div><div class="line"><a class="code" href="master_8h.xhtml#ab84043a15f748ed8dfde8735af5b91d4">uns32</a> value = 1;</div><div class="line"><a class="code" href="group__grp__pm__functions.xhtml#gaa69957bd29e392a02e864239d956057a">pl_set_param</a>(hcam, <a class="code" href="group__grp__pm__parameters.xhtml#gaf9380c3481ef2fb3e3f4c8a31eba5a24">PARAM_PP_PARAM</a>, &amp;value);</div></div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>Please, refer to the <a class="el" href="_ex__post_processing_parameters.xhtml">Post-Processing Parameters</a> and <a class="el" href="_ex__post_processing_programmatically.xhtml">Post-Processing Programmatically</a> code samples for more details. </dd></dl>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="_pvcam_api.xhtml">API Manual</a></li><li class="navelem"><a class="el" href="_api_advanced.xhtml">Advanced Features</a></li>
    <li class="footer">
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a></li>
  </ul>
</div>
</body>
</html>
