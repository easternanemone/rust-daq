<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PVCAM: Scan Mode</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="PM_logo_html.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PVCAM
   &#160;<span id="projectnumber">3.10.x</span>
   </div>
   <div id="projectbrief">Programmable Virtual Camera Access Method library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_scan_mode.xhtml','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Scan Mode </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="secScanModeIntro"></a>
Introduction</h1>
<p>Programmable Scan Mode provides increased control over the rolling shutter exposure and read-out functionality of sCMOS sensors. The rolling shutter read-out behavior is a common implementation on sCMOS sensors, and Programmable Scan Mode provides access to the sensor timing settings to allow optimization around imaging requirements.</p>
<p>Rolling shutter readout implementations digitize pixel intensities one row at a time. A “reset” signal starts at the first row of the sensor and resets or clears the row of pixels of any collected signal, effectively starting the exposure. This reset signal sweeps downwards towards the last row, propagating at a rate defined as line-time: the amount of time it takes to activate each row of pixels.</p>
<p>The reset signal is followed by a “readout” signal which causes the amount of light captured by each row of pixels to be digitized and read out of the sensor. The readout signal signifies the end of the exposure or light capture. The time between the reset and readout signals is defined as the exposure time, the amount of time each pixel is in the light collection phase.</p>
<p>In the figure below, the highlighted region of the sensor between the reset signal and readout signal is the only area collecting light. As the rolling shutter proceeds down the sensor, the highlighted region sweeps from the top to the bottom. This can be synchronized to the sweep of an illumination laser for scanning light sheet microscopy. </p><div class="image">
<img src="ScanModeIntro.png" alt="ScanModeIntro.png"/>
</div>
<p>The readout signal always follows the reset signal by a delay equal to the exposure time. This exposure time is always a multiple of the line-time of the sensor. If the exposure time is set to be equal to 10 line-times, the readout signal is behind the reset signal by 10 rows.</p>
<h1><a class="anchor" id="secIncLineTime"></a>
Increasing the Line-Time</h1>
<p>Modifying and increasing the line-time of a sensor gives greater flexibility to control the number of rows between the reset and readout signals and the exposure time, allowing for both an optimized experimental setup and adequate signal levels. Controlling the line-time makes synchronization between the illumination and acquisition simpler as well, providing control over the rate at which the exposing rows propagate down the sensor. Programmable Scan Mode does not change the line-time of the sensor but provides the ability to add delays to the reset and readout signals. The addition of these delays delivers the same effect as if the line-time of the sensor had been increased: </p><div class="image">
<img src="IncreasingLineTime.png" alt="IncreasingLineTime.png"/>
</div>
<h1><a class="anchor" id="secModes"></a>
Modes</h1>
<p>Programmable Scan Mode provides access to three modes: </p>
<h2><a class="anchor" id="subSecAuto"></a>
1. Auto</h2>
<p>When Programmable Scan Mode is set to Auto via <a class="el" href="group__grp__pm__parameters.xhtml#ga0c9aa3b91693cda7dc9ccc4faa23c08a" title="Scan mode of the camera. ">PARAM_SCAN_MODE</a>, the line-time is set to 1 line. This provides the highest framerates and minimal control over the ability to set the width between the reset and readout signals. There is no delay added after the line time. This is the default mode and represents normal sensor operation.</p>
<h2><a class="anchor" id="subSecLineDelay"></a>
2. Line Delay</h2>
<p>When Programmable Scan Mode is set to Line Delay via <a class="el" href="group__grp__pm__parameters.xhtml#ga0c9aa3b91693cda7dc9ccc4faa23c08a" title="Scan mode of the camera. ">PARAM_SCAN_MODE</a>, a delay (<a class="el" href="group__grp__pm__parameters.xhtml#ga05e398c8cb8c9f4ab74fca46b9d422af" title="Scan line delay value of the camera. ">PARAM_SCAN_LINE_DELAY</a>) can be added after the line-time, slowing the propagation of the reset and readout signals. This causes the effective line time of the sensor to be increased. This delay is added onto the default line time in increments equal to the line-time.</p>
<center>Scan Line Time = Line Time <sub>Sensor</sub> + (Line Time <sub>Sensor</sub> × Scan Line Delay)</center><p>A value of 1 adds a delay equal to 1 line-time. This results in an effective line-time equal to double the value of line time.</p>
<center>Line Time <sub>Sensor</sub> = 10µs</center> <center>Scan Line Delay = 1</center> <center>Delay = 10µs × 1 = 10µs</center> <center>Scan Line Time = 10µs + 10µs = 20µs</center><p>A value of 10 adds a delay of 10 line-times which results in an effective line-time equal to 11 times longer than the default line-time.</p>
<center>Line Time <sub>Sensor</sub> = 10µs</center> <center>Scan Line Delay = 10</center> <center>Delay = 10µs × 10 = 100µs</center> <center>Scan Line Time = 100µs + 10µs = 110µs</center><p>The frame rate when imaging in this mode is determined by the number of rows being imaged and the Effective Line Time.</p>
<center>Readout Time<sub>Image</sub> = Scan Line Time × N<sub>Rows</sub></center><div class="image">
<img src="FrameRateEq.png" alt="FrameRateEq.png"/>
</div>
<p>The minimum line delay value is 1. This is also the default value when Line Delay mode is selected.</p>
<p>When in Line Delay mode, Scan Width (<a class="el" href="group__grp__pm__parameters.xhtml#gabd3584313246f12e7f8842e746eb4a16" title="Scan width in number of lines. ">PARAM_SCAN_WIDTH</a>), the number of rows between the reset and readout signals will be calculated automatically. </p><div class="image">
<img src="ScanWidthEq.png" alt="ScanWidthEq.png"/>
</div>
<p> A Scan Width parameter is available and reports the number of rows between the reset and readout signals.</p>
<h2><a class="anchor" id="subSecScanWidth"></a>
3. Scan Width</h2>
<p>When Programmable Scan Mode is set to Scan Width via <a class="el" href="group__grp__pm__parameters.xhtml#ga0c9aa3b91693cda7dc9ccc4faa23c08a" title="Scan mode of the camera. ">PARAM_SCAN_MODE</a>, the number of rows between the reset and readout signal can be set. It gives direct control to setting the size of the imaging region.</p>
<p>Scan Width is defined as number of rows between Reset and Readout</p>
<p>When the Scan Width (<a class="el" href="group__grp__pm__parameters.xhtml#gabd3584313246f12e7f8842e746eb4a16" title="Scan width in number of lines. ">PARAM_SCAN_WIDTH</a>) is set, the effective line time required is automatically calculated.</p>
<div class="image">
<img src="ScanLineDelayEq.png" alt="ScanLineDelayEq.png"/>
</div>
<center>Scan Line Time = Line Time<sub>Sensor</sub> + (Line Time<sub>Sensor</sub> × Scan Line Delay)</center><p> The Effective Line Time is reported as the Scan Line Time parameter <a class="el" href="group__grp__pm__parameters.xhtml#gadfdc632fc186cbda380dff97bbd3a20f" title="Scan line time of the camera. ">PARAM_SCAN_LINE_TIME</a> in nanoseconds.</p>
<p>Scan Line Delay (<a class="el" href="group__grp__pm__parameters.xhtml#ga05e398c8cb8c9f4ab74fca46b9d422af" title="Scan line delay value of the camera. ">PARAM_SCAN_LINE_DELAY</a>) is the line delay value that can be changed to increase or decrease the delay between reset and the readout. This parameter can be changed only when in Line Delay Scan Mode. When the Scan Mode is set to Scan Width, this parameter becomes read-only and automatically calculates the number of line delays based on the settings for the Scan Width and exposure time.</p>
<p>The three scan modes can be selected in the Device Property Browser dialog box of Micro-Manager as shown below.</p>
<div class="image">
<img src="ScanModeMMSelection.png" alt="ScanModeMMSelection.png"/>
</div>
<h1><a class="anchor" id="secScanDirections"></a>
Scan Directions</h1>
<p>To help with integrating sCMOS cameras into imaging systems, Programmable Scan Mode also provides control over the direction of readout for the rolling shutter. Programmable Scan Mode provides three options to select from via <a class="el" href="group__grp__pm__parameters.xhtml#ga23d839ced32e040dc870806e5690297f" title="Scan direction of the camera. ">PARAM_SCAN_DIRECTION</a> parameter.</p>
<h2><a class="anchor" id="subSecDown"></a>
1. Down</h2>
<p>A scan direction of Down is the default readout direction for all sCMOS cameras. The rolling shutter starts at the topmost row of the sensor and propagates downwards towards the bottommost row. </p><div class="image">
<img src="ScanDirectionDown.png" alt="ScanDirectionDown.png"/>
</div>
<p>Each subsequent frame acquisition restarts at the topmost row.</p>
<h2><a class="anchor" id="subSecUp"></a>
2. Up</h2>
<p>A scan direction of Up inverts the direction of read out. The rolling shutter starts at the bottommost row and propagates upwards towards the topmost row. </p><div class="image">
<img src="ScanDirectionUp.png" alt="ScanDirectionUp.png"/>
</div>
<p>Each subsequent frame acquisition restarts at the bottommost row.</p>
<p>The image orientation when acquired in this mode will not be inverted and will be consistent with the Down scan direction.</p>
<h2><a class="anchor" id="subSecDownUp"></a>
3. Down-Up Alternate</h2>
<p>A scan direction of Down-Up alternates the direction of acquisition. The rolling shutter starts at the topmost row and propagates downwards towards the bottommost row. For the next frame, the rolling shutter will begin at the bottommost row and propagate upwards towards the topmost row. The acquisition will continue to alternate the readout direction between frames. </p><div class="image">
<img src="ScanDirectionDownUpAlt.png" alt="ScanDirectionDownUpAlt.png"/>
</div>
<p>The image orientation when acquired in this mode will have no inverted frames and will be consistent with the Down scan direction. The three scan directions can be selected in the Device Property Browser dialog box of Micro-Manager as shown below. </p><div class="image">
<img src="ScanDirectionSelectionMM.png" alt="ScanDirectionSelectionMM.png"/>
</div>
<p>A Scan Direction Reset parameter <a class="el" href="group__grp__pm__parameters.xhtml#gaa2ad2c9814d8c2a8a787b86d8b496ec9" title="Scan direction reset state. ">PARAM_SCAN_DIRECTION_RESET</a> is also available: </p><div class="image">
<img src="ScanDirectionResetMM.png" alt="ScanDirectionResetMM.png"/>
</div>
<p>The default setting for this parameter is Yes. This ensures that the first frame of each new acquisition sequence will start at the topmost row and propagate downwards. When the <a class="el" href="group__grp__pm__parameters.xhtml#gaa2ad2c9814d8c2a8a787b86d8b496ec9" title="Scan direction reset state. ">PARAM_SCAN_DIRECTION_RESET</a> is set to False, the first frame for each new acquisition will start at the location of the last frame in the previous sequence. If the last frame ended at the bottommost row, the first frame of the subsequent acquisition will begin at the bottommost row and propagate upwards.</p>
<h1><a class="anchor" id="secScanModeExpOutModes"></a>
Expose-Out Modes</h1>
<p>A Line Output expose out mode has been added as an option. This expose out mode provides a rising edge for each row the reset signal propagates past. This provides a hardware signal that indicates the progress as the acquisition moves across the sensor.</p>
<p>The Triggering and Expose-Out mode behavior is shown in the diagram below: </p><div class="image">
<img src="ScanModeExposeOutModes.png" alt="ScanModeExposeOutModes.png"/>
</div>
 </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="_pvcam_api.xhtml">API Manual</a></li><li class="navelem"><a class="el" href="_api_advanced.xhtml">Advanced Features</a></li>
    <li class="footer">
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a></li>
  </ul>
</div>
</body>
</html>
