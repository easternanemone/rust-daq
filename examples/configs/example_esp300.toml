# Example Configuration for Newport ESP300 Motion Controller
#
# The ESP300 is a 3-axis motion controller for precision stages.
# This file demonstrates how to configure the ESP300 for use with the Rust DAQ application.
#
# Connection Settings:
# - The ESP300 uses RS-232 serial communication
# - Default settings: 19200 baud, 8 data bits, no parity, 1 stop bit
# - IMPORTANT: Hardware flow control (RTS/CTS) is REQUIRED
#
# Usage:
# 1. Connect the ESP300 to your computer via RS-232 (may require USB adapter)
# 2. Identify the serial port (e.g., /dev/ttyUSB0 on Linux, COM3 on Windows)
# 3. Update the port parameter below
# 4. Optionally configure per-axis settings
# 5. Load this configuration in the Rust DAQ application

[instruments.motion_controller]
# Instrument type - must match the registered type in the registry
type = "esp300"

# Serial port connection
# Linux/macOS: /dev/ttyUSB0, /dev/ttyS0, /dev/cu.usbserial-*
# Windows: COM1, COM2, COM3, etc.
port = "/dev/ttyUSB0"

# Baud rate (default: 19200)
# The ESP300 typically uses 19200 baud (faster than the 1830-C)
baud_rate = 19200

# IMPORTANT: Hardware flow control (RTS/CTS) is enabled by default
# The ESP300 requires this for reliable communication

# Optional per-axis configuration
# You can set default values for velocity, acceleration, and units for each axis
# These will be applied when initializing the controller

# Axis 1 Configuration (e.g., X-axis)
[instruments.motion_controller.axis1]
# Units: 0=counts, 1=mm, 2=µm, 3=deg, 4=grad, 5=in, 6=mil, 7=µin
units = 1  # millimeters
velocity = 5.0  # mm/s
acceleration = 10.0  # mm/s²

# Axis 2 Configuration (e.g., Y-axis)
[instruments.motion_controller.axis2]
units = 1  # millimeters
velocity = 5.0  # mm/s
acceleration = 10.0  # mm/s²

# Axis 3 Configuration (e.g., Z-axis or rotation stage)
[instruments.motion_controller.axis3]
units = 3  # degrees
velocity = 10.0  # deg/s
acceleration = 20.0  # deg/s²

# Example: Multiple ESP300 controllers
# If you have multiple ESP300 units, configure them separately

[instruments.motion_controller_2]
type = "esp300"
port = "/dev/ttyUSB1"
baud_rate = 19200

[instruments.motion_controller_2.axis1]
units = 1
velocity = 2.0
acceleration = 5.0

# Example usage in experiments
# Reference these controllers in your experiment configurations
# The driver provides methods for:
# - Homing: controller.home_axis(1)
# - Absolute moves: controller.move_absolute(1, 10.0)
# - Relative moves: controller.move_relative(1, 5.0)
# - Position queries: controller.get_position(1)
# - Velocity/acceleration control
# - Motor on/off control
# - Non-blocking motion commands
