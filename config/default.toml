# Default configuration for Rust DAQ application

# Log level: "error", "warn", "info", "debug", "trace"
log_level = "info"

[storage]
default_path = "data_output"
default_format = "csv" # "csv", "hdf5", "arrow"

# Configuration for specific instruments
[instruments]

[instruments.mock]
type = "mock"
name = "Mock Instrument"
sample_rate_hz = 1000.0 # Increased for faster testing
num_samples = 4096      # Enough for multiple FFT windows
channels = ["sine_wave", "cosine_wave"]

[instruments.scpi_keithley]
type = "scpi_keithley"
name = "Keithley 2400 (SCPI)"
# Example for a serial-based SCPI device
# port = "/dev/ttyUSB0"
# baud_rate = 9600
# Example for a network-based SCPI device
address = "192.168.1.102"
port = 5025

[instruments.visa_rigol]
type = "visa_instrument"
name = "Rigol DS1054Z (VISA)"
resource_string = "TCPIP0::192.168.1.101::INSTR"
polling_rate_hz = 10.0
queries = { "voltage" = ":MEAS:VPP? CHAN1", "frequency" = ":MEAS:FREQ? CHAN1" }

# Configuration for data processing pipelines
# Each key under [processors] corresponds to an instrument ID.
# The value is an array of processor configurations to be applied in order.
[processors]
mock = [
  { type = "iir", filter_type = "Lowpass", f0 = 50.0, fs = 1000.0 },
  { type = "fft", window_size = 1024, overlap = 512, sampling_rate = 1000.0 }
]
