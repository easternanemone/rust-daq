# V4 Configuration for Rust DAQ
# This is the new configuration format for V4 architecture using Kameo actors

[application]
name = "Rust DAQ V4"
# Tracing level: trace, debug, info, warn, error
log_level = "info"

[actors]
# Kameo actor system configuration
# Default mailbox capacity for actor message queues
default_mailbox_capacity = 100
# Actor spawn timeout in milliseconds
spawn_timeout_ms = 5000
# Actor shutdown timeout in milliseconds
shutdown_timeout_ms = 5000

[storage]
# Default storage backend: arrow, hdf5, or both
default_backend = "hdf5"
# Output directory for data files
output_dir = "data_output"
# Compression level (0-9, 0 = no compression)
compression_level = 6
# Auto-flush interval in seconds (0 = manual flush only)
auto_flush_interval_secs = 30

# V4 Instrument Definitions
# Each instrument runs as a Kameo actor with typed message passing
[[instruments]]
id = "mock_power_meter"
type = "MockPowerMeter"
enabled = true

[instruments.config]
# Instrument-specific configuration
sampling_rate_hz = 10.0
wavelength_nm = 532.0

# Example: Newport 1830-C Power Meter (commented out)
# [[instruments]]
# id = "newport_pm"
# type = "Newport1830C"
# enabled = false
#
# [instruments.config]
# port = "/dev/ttyUSB0"
# baud_rate = 9600
# wavelength_nm = 532.0

# Example: PVCAM Camera (commented out)
# [[instruments]]
# id = "pvcam_camera"
# type = "PVCAMCamera"
# enabled = false
#
# [instruments.config]
# camera_name = "PMPrimeBSI"
# exposure_ms = 100.0
# roi = [0, 0, 2048, 2048]  # [x, y, width, height]
# binning = [1, 1]  # [x_bin, y_bin]
